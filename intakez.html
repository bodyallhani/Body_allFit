<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ë°”ë””ì˜¬í• ë‹¤ì´ì–´íŠ¸ ë¬¸ì§„í‘œ (ëŒ€ë©´ìš©)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/bodyallhani/gen-intake/main/bodyall.png">
  <link rel="apple-touch-icon" href="https://raw.githubusercontent.com/bodyallhani/gen-intake/main/bodyall.png">
  <style>
    /* í”„ë¦¬ë¯¸ì—„ ë©”ë””ì»¬ ë””ìì¸ ì‹œìŠ¤í…œ */
    :root {
      --bg: #f8fafc;
      --card-bg: #ffffff;
      --primary: #1e293b; /* ë”¥ ë„¤ì´ë¹„ */
      --accent: #c29f5d;  /* í”„ë¦¬ë¯¸ì—„ ê³¨ë“œ */
      --text-main: #334155;
      --text-sub: #64748b;
      --border: #e2e8f0;
      --required: #ef4444;
      --radius: 12px;
      --input-bg: #fdfdfd;
    }

    * { box-sizing: border-box; -webkit-font-smoothing: antialiased; }
    
    body {
      margin: 0;
      padding: 20px 16px 120px;
      font-family: "Pretendard Variable", Pretendard, -apple-system, system-ui, sans-serif;
      background: var(--bg);
      color: var(--text-main);
      line-height: 1.6;
    }

    .container {
      max-width: 560px;
      margin: 0 auto;
    }

    /* í—¤ë” ì˜ì—­ */
    header {
      text-align: center;
      margin-bottom: 30px;
    }
    .logo {
      width: 60px;
      margin-bottom: 12px;
    }
    h1 {
      font-size: 1.4rem;
      font-weight: 800;
      color: var(--primary);
      margin: 0 0 8px;
      letter-spacing: -0.5px;
    }
    .subtitle {
      font-size: 0.95rem;
      color: var(--text-sub);
      word-break: keep-all;
    }

    /* ì¹´ë“œ/ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
    .section-card {
      background: var(--card-bg);
      padding: 28px 24px;
      border-radius: var(--radius);
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
      margin-bottom: 24px;
      border: 1px solid var(--border);
    }

    .section-title {
      font-size: 1.1rem;
      font-weight: 800;
      color: var(--primary);
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .section-title::before {
      content: '';
      display: block;
      width: 4px;
      height: 18px;
      background: var(--accent);
      border-radius: 2px;
    }

    /* í•„ë“œ ìŠ¤íƒ€ì¼ */
    .field {
      margin-bottom: 24px;
    }
    .field:last-child { margin-bottom: 0; }
    
    .label {
      font-size: 0.95rem;
      font-weight: 700;
      margin-bottom: 8px;
      color: var(--primary);
    }
    .required {
      color: var(--required);
      margin-left: 2px;
    }
    .field-desc {
      font-size: 0.85rem;
      color: var(--text-sub);
      margin-bottom: 10px;
      line-height: 1.4;
    }

    /* ì…ë ¥ ìš”ì†Œ */
    input[type="text"],
    input[type="tel"],
    input[type="number"],
    textarea,
    select {
      width: 100%;
      padding: 12px 14px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: var(--input-bg);
      font-size: 1rem;
      transition: all 0.2s;
    }
    input:focus, textarea:focus, select:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(194, 159, 93, 0.1);
    }

    /* ì„ íƒì§€ ì˜µì…˜ (ë²„íŠ¼ ëŠë‚Œ) */
    .options-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 10px;
      margin-top: 8px;
    }
    .inline-options {
      display: flex;
      flex-wrap: wrap;
      gap: 10px 16px;
      margin-top: 8px;
    }
    label {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 0.9rem;
      cursor: pointer;
    }
    input[type="radio"], input[type="checkbox"] {
      width: 18px;
      height: 18px;
      accent-color: var(--accent);
    }

    /* ì•ˆë‚´ ì´ë¯¸ì§€ */
    .image-wrapper {
      margin: 10px 0 20px;
      border-radius: 8px;
      overflow: hidden;
      border: 1px solid var(--border);
    }
    .image-wrapper img {
      width: 100%;
      display: block;
    }

    /* íŠ¹ìˆ˜ ë°•ìŠ¤ */
    .highlight-box {
      background: #fffcf5;
      border-left: 4px solid var(--accent);
      padding: 16px;
      border-radius: 8px;
      margin: 15px 0;
      font-size: 0.88rem;
      color: #7c5e20;
    }
    .consent-box {
      background: #f1f5f9;
      padding: 16px;
      border-radius: 8px;
      font-size: 0.82rem;
      color: var(--text-sub);
      border: 1px solid var(--border);
    }

    /* ê¸ˆì•¡ í‘œì‹œ */
    .total-display {
      background: var(--primary);
      color: #fff;
      padding: 20px;
      border-radius: 12px;
      text-align: center;
      margin-top: 20px;
    }
    .total-display .amount-label { font-size: 0.9rem; opacity: 0.8; }
    .total-display .amount-value { font-size: 1.5rem; font-weight: 800; color: #fff; }
    .total-display span { color: var(--accent); }

    /* ë²„íŠ¼ */
    #allInOneBtn {
      background: var(--primary);
      color: #fff;
      border: none;
      padding: 18px;
      border-radius: var(--radius);
      font-size: 1.1rem;
      font-weight: 800;
      cursor: pointer;
      width: 100%;
      margin-top: 30px;
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s;
    }
    #allInOneBtn:active { transform: scale(0.98); }
    #allInOneBtn:disabled { background: #cbd5e1; }

    .hint-step {
      font-size: 0.85rem;
      background: #fff;
      padding: 12px;
      border-radius: 8px;
      border: 1px dashed var(--accent);
      margin-bottom: 20px;
      color: var(--primary);
    }

    .hidden { display: none; }
  </style>
</head>
<body>

<div class="container">
  <header>
    <img class="logo" src="https://raw.githubusercontent.com/bodyallhani/gen-intake/main/bodyall.png" alt="ë¡œê³ ">
    <h1>ë°”ë””ì˜¬í• ë‹¤ì´ì–´íŠ¸ ë¬¸ì§„í‘œ</h1>
    <p class="subtitle">ê°œê°œì¸ì˜ ê±´ê°• ìƒíƒœì— ë§ì¶˜ ì •ë°€í•œ ì²˜ë°©ì„ ìœ„í•´<br>ì•„ë˜ ë¬¸í•­ì„ ê¼¼ê¼¼íˆ ì‘ì„±í•´ ì£¼ì„¸ìš”.</p>
  </header>

  <form id="faceForm">
    <div class="section-card">
      <div class="section-title">ê¸°ë³¸ ì¸ì  ì‚¬í•­</div>
      <div class="image-wrapper">
        <img src="img1.jpg" alt="ë°”ë””ì˜¬í• ì•ˆë‚´">
      </div>

      <div class="field">
        <div class="label">ì´ë¦„ <span class="required">*</span></div>
        <input type="text" id="name" name="name" required placeholder="ì˜ˆ: ì¥ì›ì˜" />
      </div>

      <div class="field">
        <div class="label">ìƒë…„ì›”ì¼ (ì• 6ìë¦¬) <span class="required">*</span></div>
        <input type="text" id="rrn1" name="rrn1" inputmode="numeric" pattern="\d{6}" maxlength="6" required placeholder="ì˜ˆ: 950101" />
      </div>

      <div class="field">
        <div class="label">ì„±ë³„ <span class="required">*</span></div>
        <div class="inline-options">
          <label><input type="radio" name="gender" value="ë‚¨ì„±" required /> ë‚¨ì„±</label>
          <label><input type="radio" name="gender" value="ì—¬ì„±" /> ì—¬ì„±</label>
          <label><input type="radio" name="gender" value="ê¸°íƒ€/ë¬´ì‘ë‹µ" /> ê¸°íƒ€</label>
        </div>
      </div>

      <div class="field">
        <div class="label">í‚¤(cm) / í˜„ì¬ ì²´ì¤‘(kg) <span class="required">*</span></div>
        <div style="display:flex; gap:10px;">
          <input type="number" id="height" name="height" required placeholder="í‚¤" />
          <input type="number" id="weight" name="weight" required placeholder="ì²´ì¤‘" />
        </div>
      </div>

      <div class="field">
        <div class="label">ì§ì—… ë° í™œë™ëŸ‰</div>
        <input type="text" id="job" name="job" placeholder="ì˜ˆ: ì‚¬ë¬´ì§, ì „ì—…ì£¼ë¶€ ë“±" style="margin-bottom:10px;" />
        <div class="inline-options">
          <label><input type="checkbox" name="activity" value="ì¢Œì‹ ìƒí™œ" /> ëŒ€ë¶€ë¶„ ì•‰ì•„ìˆìŒ</label>
          <label><input type="checkbox" name="activity" value="í™œë™ì " /> ì„œê±°ë‚˜ ê±·ëŠ” í¸</label>
          <label><input type="checkbox" name="activity" value="ê°•ë„ ë†’ìŒ" /> í™œë™ëŸ‰ ë§¤ìš° ë§ìŒ</label>
        </div>
      </div>
    </div>

    <div class="section-card">
      <div class="section-title">ìƒí™œ ìŠµê´€ ì§€í‘œ</div>
      <div class="field">
        <div class="label">ìˆ˜ë©´ íŒ¨í„´</div>
        <div class="inline-options">
          <label><input type="checkbox" name="sleep" value="ì…ë©´ ê³¤ë€" /> ì ë“¤ê¸° í˜ë“¦</label>
          <label><input type="checkbox" name="sleep" value="ì¦ì€ ê°ì„±" /> ìì£¼ ê¹¸</label>
          <label><input type="checkbox" name="sleep" value="ê¸°ìƒ í›„ í”¼ë¡œ" /> ìë„ í”¼ê³¤í•¨</label>
          <label><input type="checkbox" name="sleep" value="ì–‘í˜¸" /> ë¬¸ì œ ì—†ìŒ</label>
        </div>
      </div>

      <div class="field">
        <div class="label">ìŒì£¼ ë¹ˆë„</div>
        <select id="drink" name="drink">
          <option value="">ì„ íƒí•˜ì„¸ìš”</option>
          <option value="ê±°ì˜ ì•ˆ ë§ˆì‹¬">ê±°ì˜ ì•ˆ ë§ˆì‹¬</option>
          <option value="ì£¼ 1~3íšŒ">ì£¼ 1~3íšŒ</option>
          <option value="ì£¼ 4íšŒ ì´ìƒ">ì£¼ 4íšŒ ì´ìƒ</option>
        </select>
      </div>
    </div>

    <div class="section-card">
      <div class="section-title">ê±´ê°• ë° ê¸°ì™•ë ¥</div>
      <div class="field">
        <div class="label">ì§„ë‹¨ë°›ì€ ì§ˆí™˜</div>
        <div class="options-grid">
          <label><input type="checkbox" name="disease" value="ê³ í˜ˆì••" /> ê³ í˜ˆì••</label>
          <label><input type="checkbox" name="disease" value="ë‹¹ë‡¨" /> ë‹¹ë‡¨</label>
          <label><input type="checkbox" name="disease" value="ì‹¬ì¥" /> ì‹¬ì¥ì§ˆí™˜</label>
          <label><input type="checkbox" name="disease" value="ê°‘ìƒì„ " /> ê°‘ìƒì„ </label>
          <label><input type="checkbox" name="disease" value="ì •ì‹ ê³¼" /> ì •ì‹ ê³¼</label>
          <label><input type="checkbox" name="disease_none" value="í•´ë‹¹ì—†ìŒ" /> í•´ë‹¹ ì—†ìŒ</label>
        </div>
        <textarea id="disease_etc" name="disease_etc" placeholder="ê¸°íƒ€ ì§ˆí™˜ì´ ìˆë‹¤ë©´ ì ì–´ì£¼ì„¸ìš”." style="margin-top:10px;"></textarea>
      </div>

      <div class="field">
        <div class="label">ë³µìš© ì¤‘ì¸ ì•½</div>
        <div class="field-desc">ì²˜ë°© ë¶ˆê°€ ì•½ë¬¼ í¬í•¨ ì—¬ë¶€ í™•ì¸ì„ ìœ„í•´ ìƒì„¸íˆ ì ì–´ì£¼ì„¸ìš”.</div>
        <div class="inline-options">
          <label><input type="checkbox" name="med" value="í˜ˆì••ì•½" /> í˜ˆì••ì•½</label>
          <label><input type="checkbox" name="med" value="ë‹¹ë‡¨ì•½" /> ë‹¹ë‡¨ì•½</label>
          <label><input type="checkbox" name="med" value="ê°‘ìƒì„ ì•½" /> ê°‘ìƒì„ ì•½</label>
          <label><input type="checkbox" name="med_none" value="ì—†ìŒ" /> ì—†ìŒ</label>
        </div>
        <textarea id="med_etc" name="med_etc" placeholder="ì•½ ì´ë¦„ì„ ëª¨ë¥´ì…”ë„ ëŒ€ëµ ì–´ë–¤ ìš©ë„ì¸ì§€ ì ì–´ì£¼ì„¸ìš”." style="margin-top:10px;"></textarea>
      </div>

      <div class="field" id="femaleBlock">
        <div class="label">ë¶€ì¸ê³¼ ê´€ë ¨ (ì—¬ì„± í•´ë‹¹)</div>
        <div class="inline-options">
          <label><input type="radio" name="preg" value="ì„ì‹  ì¤€ë¹„" /> ì„ì‹  ì¤€ë¹„</label>
          <label><input type="radio" name="preg" value="ì„ì‹  ì¤‘" /> ì„ì‹  ì¤‘</label>
          <label><input type="radio" name="preg" value="ìˆ˜ìœ  ì¤‘" /> ìˆ˜ìœ  ì¤‘</label>
          <label><input type="radio" name="preg" value="í•´ë‹¹ì—†ìŒ" /> í•´ë‹¹ ì—†ìŒ</label>
        </div>
      </div>
    </div>

    <div class="section-card">
      <div class="section-title">ë‹¤ì´ì–´íŠ¸ ëª©í‘œ</div>
      <div class="field">
        <div class="label">ë‹¤ì´ì–´íŠ¸ ê²½í—˜</div>
        <div class="inline-options">
          <label><input type="checkbox" name="diet_exp" value="ìš´ë™" /> ìš´ë™</label>
          <label><input type="checkbox" name="diet_exp" value="ì‹ë‹¨" /> ì‹ë‹¨</label>
          <label><input type="checkbox" name="diet_exp" value="í•œì•½" /> í•œì•½</label>
          <label><input type="checkbox" name="diet_exp" value="ì–‘ì•½" /> ì–‘ì•½</label>
        </div>
      </div>
      <div class="field">
        <div class="label">ìš”ìš” ê²½í—˜ ì—¬ë¶€</div>
        <div class="inline-options">
          <label><input type="radio" name="yo_yo" value="ìœ " /> ê²½í—˜ ìˆìŒ</label>
          <label><input type="radio" name="yo_yo" value="ë¬´" /> ê²½í—˜ ì—†ìŒ</label>
        </div>
      </div>
      <div class="field">
        <div class="label">ëª©í‘œ ê°ëŸ‰ (kg)</div>
        <input type="number" id="goal_weight" name="goal_weight" placeholder="ì˜ˆ: 8" />
      </div>
      <div class="field">
        <div class="label">ê³ ë¯¼ë˜ëŠ” ì§€ì </div>
        <textarea id="main_concern" name="main_concern" placeholder="ì˜ˆ: ìš”ìš”, í­ì‹, ì •ì²´ê¸° ë“±"></textarea>
      </div>
    </div>

    <div class="section-card">
      <div class="section-title">í”„ë¡œê·¸ë¨ ì„ íƒ</div>
      <div class="image-wrapper">
        <img src="img3.jpg" alt="ê°€ê²© ì•ˆë‚´">
      </div>
      
      <div class="field" id="programOptions">
        <div class="label">í¬ë§ í”„ë¡œê·¸ë¨ <span class="required">*</span></div>
        <div class="field-desc">ì¤‘ë³µ ì„ íƒ ì‹œ í•©ê³„ ê¸ˆì•¡ì´ í•˜ë‹¨ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
        
        <div style="font-weight:700; font-size:0.85rem; margin-bottom:8px; color:var(--accent);">[ë°”ë””ì˜¬í• ë‹¤ì´ì–´íŠ¸]</div>
        <label style="display:block; margin-bottom:10px;"><input type="checkbox" name="program" value="4ì£¼(2+1)" /> 4ì£¼ (3í†µ) - 98,000ì›</label>
        <label style="display:block; margin-bottom:10px;"><input type="checkbox" name="program" value="8ì£¼(4+2)" /> 8ì£¼ (6í†µ) - 187,000ì›</label>
        <label style="display:block; margin-bottom:15px;"><input type="checkbox" name="program" value="12ì£¼(8+3)" /> 12ì£¼ (11í†µ) - 317,000ì›</label>

        <div style="font-weight:700; font-size:0.85rem; margin-bottom:8px; color:var(--accent);">[ìš”ìš”ë°©ì§€ 6ê°œì›”]</div>
        <label style="display:block; margin-bottom:10px;"><input type="checkbox" name="program" value="ìš”ìš”2x(16+4)" /> Double(2x) 20í†µ - 547,000ì›</label>
        <label style="display:block; margin-bottom:15px;"><input type="checkbox" name="program" value="ìš”ìš”3x(24+5)" /> Triplet(3x) 29í†µ - 752,000ì›</label>

        <div style="font-weight:700; font-size:0.85rem; margin-bottom:8px; color:var(--accent);">[ë³´ì¡° ìš”ë²•]</div>
        <label style="display:block; margin-bottom:10px;"><input type="checkbox" name="program" value="ì¥í•´ë…1ë‹¬(1í†µ)" /> ì¥í•´ë…í™˜ 1ë‹¬ - 10,000ì›</label>
        <label style="display:block;"><input type="checkbox" name="program" value="ì¥í•´ë…3ë‹¬(3í†µ)" /> ì¥í•´ë…í™˜ 3ë‹¬ - 20,000ì›</label>
      </div>

      <div class="highlight-box">
        <b>ğŸ’¡ í•„ë…:</b> 4Â·8ì£¼ í”„ë¡œê·¸ë¨ì€ íƒë°°ë¹„ 4,000ì›ì´ ì¶”ê°€ë˜ë©°, 12ì£¼/ìš”ìš”ë°©ì§€ í”„ë¡œê·¸ë¨ì€ ë¬´ë£Œë°°ì†¡ì…ë‹ˆë‹¤. (ë¹„ëŒ€ë©´ ì‹œ ì¥í•´ë…í™˜ ë‹¨ë… ì²˜ë°© ë¶ˆê°€)
      </div>

      <div class="total-display">
        <div class="amount-label">ìµœì¢… ê²°ì œ ì˜ˆìƒê¸ˆì•¡</div>
        <div class="amount-value"><span id="totalAmountText">0</span>ì›</div>
      </div>
      <input type="hidden" id="total_amount" name="total_amount" value="0" />
    </div>

    <div class="section-card">
      <div class="section-title">ìˆ˜ë ¹ ë° ê²°ì œ</div>
      <div class="field">
        <div class="label">ìˆ˜ë ¹ì¸ ì„±í•¨ <span class="required">*</span></div>
        <input type="text" id="ship_name" name="ship_name" required />
      </div>
      <div class="field">
        <div class="label">ì—°ë½ì²˜ <span class="required">*</span></div>
        <input type="tel" id="ship_phone" name="ship_phone" required placeholder="í•˜ì´í”ˆ ì—†ì´ ìˆ«ìë§Œ" />
      </div>
      <div class="field">
        <div class="label">ë°°ì†¡ ì£¼ì†Œ <span class="required">*</span></div>
        <textarea id="ship_address" name="ship_address" required></textarea>
      </div>

      <div class="field">
        <div class="label">ê²°ì œ ë°©ì‹ <span class="required">*</span></div>
        <div class="inline-options">
          <label><input type="radio" name="payment_method" value="ì¹´ë“œ ê²°ì œ" required /> ì¹´ë“œ ê²°ì œ</label>
          <label><input type="radio" name="payment_method" value="ê³„ì¢Œì´ì²´" /> ê³„ì¢Œì´ì²´</label>
        </div>
      </div>

      <div id="bankBlock" class="hidden">
        <div class="highlight-box" style="background:#f8fafc; border-color:var(--border);">
          <div class="field">
            <div class="label">ì…ê¸ˆìëª…</div>
            <input type="text" id="depositor_name" name="depositor_name" />
          </div>
          <div class="field">
            <div class="label">í˜„ê¸ˆì˜ìˆ˜ì¦</div>
            <div class="inline-options">
              <label><input type="radio" name="receipt_type" value="íœ´ëŒ€í°" /> ê°œì¸</label>
              <label><input type="radio" name="receipt_type" value="ì‚¬ì—…ì" /> ì‚¬ì—…ì</label>
            </div>
            <input type="tel" id="receipt_value" name="receipt_value" placeholder="ë²ˆí˜¸ ì…ë ¥" style="margin-top:10px;" />
          </div>
        </div>
      </div>
    </div>

    <div class="section-card">
      <div class="section-title">ìµœì¢… í™•ì¸</div>
      <div class="consent-box">
        ìˆ˜ì§‘ ëª©ì : ë‹¤ì´ì–´íŠ¸ í•œì•½ ì§„ë‹¨Â·ìƒë‹´Â·ì²˜ë°© ë° ê²°ì œÂ·íƒë°° ë°œì†¡ìš©<br>
        ë³´ìœ  ê¸°ê°„: ë²•ë ¹ì— ë”°ë¥¸ ë³´ì¡´ ê¸°ê°„ ì¢…ë£Œ í›„ ì¦‰ì‹œ íŒŒê¸°
      </div>
      <div style="margin-top:15px; text-align:center;">
        <label style="font-weight:800; font-size:1rem;">
          <input type="checkbox" id="consent2" /> ìœ„ ë‚´ìš©ì— ë™ì˜í•©ë‹ˆë‹¤.
        </label>
      </div>

      <div class="hint-step" style="margin-top:20px;">
        ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ <b>ë¬¸ì§„ ë‚´ìš©ì´ ìë™ ë³µì‚¬</b>ë©ë‹ˆë‹¤. ì¹´í†¡ì°½ì´ ì—´ë¦¬ë©´ <b>ë¶™ì—¬ë„£ê¸°</b> í›„ ì „ì†¡í•´ ì£¼ì„¸ìš”.
      </div>

      <button type="button" id="allInOneBtn">ìµœì¢…ì‘ë‹µ ë° ì „ì†¡í•˜ê¸°</button>
    </div>

    <input type="hidden" name="consent" value="ë™ì˜í•¨" />
    <textarea id="summary" class="hidden"></textarea>
  </form>
</div>

<script>
  /* [ê¸°ì¡´ ë¡œì§ ìœ ì§€] SCRIPT_URL, KAKAO_URL ë“± */
  const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzlKD52BulhyKf7fo_fZYGtNv2tYXcPCQcBTtYHKQObwoRMCaHPZt2NI8D1bPwqJRhTow/exec";
  const KAKAO_URL  = "https://pf.kakao.com/_wdtXK/chat";

  function getCheckedValues(name) {
    const nodes = document.querySelectorAll('input[name="' + name + '"]:checked');
    return Array.from(nodes).map(n => n.value);
  }

  function buildSummary() {
    /* ê¸°ì¡´ buildSummary ë¡œì§ ìœ ì§€ */
    const name    = document.getElementById("name").value.trim();
    const gender  = (document.querySelector('input[name="gender"]:checked') || {}).value || "";
    const height  = document.getElementById("height").value.trim();
    const weight  = document.getElementById("weight").value.trim();
    const job     = document.getElementById("job").value.trim();
    const activity = getCheckedValues("activity").join(", ");
    const sleep = getCheckedValues("sleep").join(", ");
    const drink   = document.getElementById("drink").value;
    const disease = [...getCheckedValues("disease"), document.getElementById("disease_etc").value.trim()].filter(x=>x).join(", ");
    const meds = [...getCheckedValues("med"), document.getElementById("med_etc").value.trim()].filter(x=>x).join(", ");
    const preg = (document.querySelector('input[name="preg"]:checked') || {}).value || "";
    const dietExp = getCheckedValues("diet_exp").join(", ");
    const yoYo = (document.querySelector('input[name="yo_yo"]:checked') || {}).value || "";
    const goalWeight = document.getElementById("goal_weight").value.trim();
    const mainConcern = document.getElementById("main_concern").value.trim();
    const shipName = document.getElementById("ship_name").value.trim();
    const shipPhone = document.getElementById("ship_phone").value.trim();
    const shipAddress = document.getElementById("ship_address").value.trim();
    const programList = getCheckedValues("program").join(", ");
    const totalAmountVal = document.getElementById("total_amount").value;
    const paymentMethod = (document.querySelector('input[name="payment_method"]:checked') || {}).value || "";

    const lines = [
      "â–  [ë°”ë””ì˜¬í• ëŒ€ë©´ ë¬¸ì§„]",
      "ì´ë¦„: " + name + " / ì„±ë³„: " + gender,
      "ìŠ¤í™: " + height + "cm / " + weight + "kg",
      "ì§ì—…/í™œë™: " + job + " / " + activity,
      "",
      "â–  ê±´ê°•ìƒíƒœ",
      "ì§ˆí™˜: " + (disease || "ì—†ìŒ"),
      "ë³µìš©ì•½: " + (meds || "ì—†ìŒ"),
      "ë¶€ì¸ê³¼: " + (preg || "-"),
      "ìˆ˜ë©´/ìŒì£¼: " + sleep + " / " + drink,
      "",
      "â–  ëª©í‘œ",
      "ê²½í—˜/ìš”ìš”: " + dietExp + " / ìš”ìš” " + yoYo,
      "ëª©í‘œ/ê³ ë¯¼: " + goalWeight + "kg / " + mainConcern,
      "",
      "â–  ì‹ ì²­í”„ë¡œê·¸ë¨",
      "í”„ë¡œê·¸ë¨: " + programList,
      "ì´ê¸ˆì•¡: " + Number(totalAmountVal).toLocaleString() + "ì›",
      "ê²°ì œë°©ì‹: " + paymentMethod,
      "",
      "â–  ë°°ì†¡ì •ë³´",
      "ìˆ˜ë ¹ì¸: " + shipName + " (" + shipPhone + ")",
      "ì£¼ì†Œ: " + shipAddress
    ];

    const summaryText = lines.join("\n");
    document.getElementById("summary").value = summaryText;
    return summaryText;
  }

  function copySummary(text) {
    const temp = document.createElement("textarea");
    temp.style.position = "fixed";
    temp.value = text;
    document.body.appendChild(temp);
    temp.select();
    document.execCommand("copy");
    document.body.removeChild(temp);
  }

  /* ê°€ê²© ê³„ì‚°ê¸° - ê¸°ì¡´ ë¡œì§ ìœ ì§€ */
  (function setupProgramCalc() {
    const programContainer = document.getElementById("programOptions");
    const totalAmountText = document.getElementById("totalAmountText");
    const totalAmountInput = document.getElementById("total_amount");

    programContainer.addEventListener("change", function() {
      const nodes = programContainer.querySelectorAll('input[name="program"]:checked');
      const programArr = Array.from(nodes).map(n => n.value);
      
      let total = 0;
      programArr.forEach(v => {
        if (v.startsWith("4ì£¼(")) total += 98000;
        else if (v.startsWith("8ì£¼(")) total += 187000;
        else if (v.startsWith("12ì£¼(")) total += 317000;
        else if (v.startsWith("ìš”ìš”2x")) total += 547000;
        else if (v.startsWith("ìš”ìš”3x")) total += 752000;
        else if (v.startsWith("ì¥í•´ë…1ë‹¬")) total += 10000;
        else if (v.startsWith("ì¥í•´ë…3ë‹¬")) total += 20000;
      });

      const has4or8 = programArr.some(v => v.startsWith("4ì£¼(") || v.startsWith("8ì£¼("));
      const hasFreeShip = programArr.some(v => v.startsWith("12ì£¼(") || v.startsWith("ìš”ìš”2x") || v.startsWith("ìš”ìš”3x"));
      if (has4or8 && !hasFreeShip) total += 4000;

      totalAmountText.textContent = total.toLocaleString();
      totalAmountInput.value = total;
    });
  })();

  /* ê³„ì¢Œì´ì²´ ë¸”ë¡ ì œì–´ */
  document.querySelectorAll('input[name="payment_method"]').forEach(radio => {
    radio.addEventListener("change", function() {
      document.getElementById("bankBlock").classList.toggle("hidden", this.value !== "ê³„ì¢Œì´ì²´");
    });
  });

  /* ìµœì¢… ì œì¶œ - ê¸°ì¡´ ë¡œì§ ìœ ì§€ */
  document.getElementById("allInOneBtn").addEventListener("click", function() {
    const form = document.getElementById("faceForm");
    if (!form.checkValidity()) { form.reportValidity(); return; }
    if (!document.getElementById("consent2").checked) { alert("ë™ì˜ ì²´í¬ê°€ í•„ìš”í•©ë‹ˆë‹¤."); return; }
    
    const summaryText = buildSummary();
    copySummary(summaryText);

    const formData = new FormData(form);
    formData.append("summary_text", summaryText);

    fetch(SCRIPT_URL, { method: "POST", body: formData, mode: "no-cors" });

    alert("ì‘ë‹µ ìš”ì•½ì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.\nì¹´í†¡ì°½ì— ë¶™ì—¬ë„£ì–´ ì£¼ì„¸ìš”!");
    window.location.href = KAKAO_URL;
  });
</script>

</body>
</html>
